language: cpp
sudo: required

os: linux
dist: xenial

env:
  global:
    - DEVKITPRO=/opt/devkitpro
    - DEVKITPPC=/opt/devkitpro/devkitPPC
    - WUT_ROOT=/opt/devkitpro/wut

matrix:
  include:
    - env: PLATFORM=buck
    - env: PLATFORM=switch
    - env: PLATFORM=wiiu
    - env: PLATFORM=pc
  allow_failures:
    - env: PLATFORM=switch
    - env: PLATFORM=wiiu
    - env: PLATFORM=pc

addons:
  apt:
    packages:
      - git
      - wget

install:
  - ./dependency_helper.sh

script:
  - if [[ "$PLATFORM == "buck" ]]; then buckaroo install && buck build :hb-appstore; else make -f Makefile.${PLATFORM}; fi
